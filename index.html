<!doctype html>
button:disabled{opacity:.6;cursor:not-allowed}
code,pre{background:#ecfeff;border-radius:8px;padding:8px 10px;display:block;white-space:pre-wrap}
.meta{opacity:.7;font-size:14px}
label{display:block;margin-top:10px;font-weight:600}
input{padding:8px 10px;border-radius:10px;border:1px solid #a7f3d0}
</style>
</head>
<body>
<main class="card" role="main" aria-label="eBay Resell App">
<h1>eBay Resell App</h1>
<p>Temporary hello page. Use the buttons below to call the API.</p>


<div class="row">
<button id="checkBtn">Check API</button>
<button id="addBtn" class="secondary">Add Demo Item</button>
<button id="listBtn">List Inventory</button>
<span id="status" class="meta">idle</span>
</div>
<pre id="out" aria-live="polite">{}</pre>


<p class="meta">Theme: Blue→Green Radiant · Change later in Settings → Appearance.</p>
</main>


<script>
// Point to your Worker API (we're calling it directly)
const API_BASE = "https://resell-api.phoneman1224.workers.dev";


const $out = document.getElementById("out");
const $status = document.getElementById("status");
const $check = document.getElementById("checkBtn");
const $add = document.getElementById("addBtn");
const $list = document.getElementById("listBtn");


const set = (msg) => ($status.textContent = msg);
const show = (obj) => ($out.textContent = typeof obj === 'string' ? obj : JSON.stringify(obj, null, 2));


async function checkApi(){
try{ set("checking…"); const r=await fetch(API_BASE+"/health"); show(await r.json()); set(r.ok?"OK":"Error"); }
catch(e){ show(String(e)); set("Error"); }
}


async function addDemo(){
try{
set("adding…");
const sku = "TEST-" + Date.now().toString().slice(-6);
const r = await fetch(API_BASE+"/inventory",{
method:"POST",
headers:{"Content-Type":"application/json"},
body: JSON.stringify({ sku, title:"Demo Item", category:"Shoes", cost_usd:12.5, quantity:1 })
});
show(await r.json());
set(r.ok?"Added":"Error");
}catch(e){ show(String(e)); set("Error"); }
}


async function listInv(){
try{ set("listing…"); const r=await fetch(API_BASE+"/inventory"); show(await r.json()); set(r.ok?"OK":"Error"); }
catch(e){ show(String(e)); set("Error"); }
}


$check.addEventListener("click", checkApi);
$add.addEventListener("click", addDemo);
$list.addEventListener("click", listInv);
</script>
</body>
</html>
